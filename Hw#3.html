<!DOCTYPE html>
<html>

<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>JSFiddle o3qf9ns5</title>

  <style>
    
  </style>

  
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>


  <script>
    // Import THREE
import * as THREE from 'https://threejsfundamentals.org/threejs/resources/threejs/r132/build/three.module.js';
import { OrbitControls } from 'https://cdn.jsdelivr.net/npm/three@0.121.1/examples/jsm/controls/OrbitControls.js';

// Create Renderer
const renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// Create Camera and Scene
const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 500);
camera.position.set(0, 0, 8);
const scene = new THREE.Scene();
const controls = new OrbitControls(camera, renderer.domElement);

// Axes
scene.add(new THREE.AxesHelper(6));

const Points = [];
const size = 390;
const range = 2.5;

for (let i = 0; i <= size; i++) {
  const x = (i / size) *( range*2)-range;

  for ( let j =0; j < size;j++){

    const y = ( j/size)*(range*2) - range;
    const z = 0;

    const value = Math.pow(x**2+y**2,2)-4*(x**2-y**2);
    if (Math.abs(value)<0.2){
      Points.push( new THREE.Vector3(x,y,z))
    }
  }
}


const Geometry = new THREE.BufferGeometry().setFromPoints(Points);
const Material = new THREE.PointsMaterial({ color: 0xffffff , size});
const Final = new THREE.Points( Geometry, Material);
scene.add(Final);


const gradientGroup = new THREE.Group();

for (let i = 0; i < Points.length; i += 8) {
  const p = Points[i];

  // Gradient at point
  const grad = new THREE.Vector3(
    2 * p.x,
    2 * p.y,
    0
  );

  const arrow = new THREE.ArrowHelper(
    grad.clone().normalize(),
    p,
    1.2,                // fixed visual length
    0x00ff00
  );

  gradientGroup.add(arrow);
}

scene.add(gradientGroup);

// Render Loop
function animate() {
  requestAnimationFrame(animate);
  controls.update();
  renderer.render(scene, camera);
}
animate();

  </script>
</body>
</html>
